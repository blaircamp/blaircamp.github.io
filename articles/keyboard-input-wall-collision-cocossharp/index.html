<!DOCTYPE html>
<html lang="en">
  <head>
  	
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	    <meta name="viewport" content="width=device-width">
	    <title>
	    	
	    		codecampbell
	    	
	    </title>
	    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Anonymous+Pro:400,700,400italic,700italic">
	    <link rel="stylesheet" href="/css/main.css">
   
  </head>
  <body>
    <header class="header">
      <div class="content-wrap">
      
	<h1>
		Simple Keyboard Input in CocosSharp
	</h1>
	<p class="author">
		blair campbell
	</p>

      </div>
    </header>
    <div id="content">
      <div class="content-wrap">
      	
	<article class="article">
		<section class="content">
			<p>I have been trying to make a simple game in CocosSharp and the next thing I wanted to tackle was moving 
something around the screen using the arrow keys.</p>
<p>I started by looking at the 2D Math with CocosSharp for the equations on how to use velocities to calculate
a new position.  That page can be found <a href="http://developer.xamarin.com/guides/cross-platform/game_development/cocossharp/math/">here</a></p>
<p>The equation is this</p>
<pre><code>PositionX += VelocityX * seconds
PositionY += VelocityY * seconds
</code></pre><p>Whenever the update method in the GameLayer is called we can calculate the next position of the object 
using the above formulas.  If the Velocity is negative, that will cause the position to decrease, if it is positive it will increase.</p>
<p>The next thing we want to do is get the input form the keyboard.  In the AddedToScene method of the GameLayer
you must register the CCEventListenerKeyboard.</p>
<pre><code>protected override void AddedToScene(){
    var keyboard = new CCEventListenerKeyboard();
    keyboard.OnKeyPressed = OnKeyPressed;
    AddEventListener(keyboard,this);
}
</code></pre><p>This will pipe all Keyboard events to the method OnKeyPressed</p>
<pre><code>private void OnKeyPressed(CCEventKeyboard e){
    ...
}
</code></pre><p>Now we want to modify this method to change the velocities of the object based on user inputs.  What I came up with was this.</p>
<pre><code>private float VelocityX {get; set;}
private float VelocityY {get; set;}
...
private void OnKeyPressed(CCEventKeyboard e)
    {
        switch (e.Keys)
        {
            case CCKeys.Space:
                break;
            case CCKeys.Up:
                VelocityY = 1;
                break;
            case CCKeys.Down:
                VelocityY = -1;
                break;
            case CCKeys.Left:
                VelocityX = -1;
                break;
            case CCKeys.Right:
                VelocityX = 1;
                break;
        }
    } 
</code></pre><p>Whenever you press the Up or Down keys on the keyboard you change the Y velocity.  Whenever you press the Left or Right keys you change the X velocity.</p>
<p>Now we can change the velocity of the object, now we have to change the position.  That is done in the update method.</p>
<pre><code>public override void Update(float time){

    var changeInPositionX = VelocityX * time;
    var changeInPositionY = VelocityY * time;

    circle.PositionX += changeInPositionX;
    circle.PositionY += changeInPositionY

}
</code></pre><p>And that should move the the object circle whenever you press an arrow key! </p>
<p>Hopefully this was of some help, stay Tuned for more code snippets from my travels through CocosSharp.</p>

		</section>
		<div id="disqus_thread"></div>
		<script type="text/javascript">
		    /* * * CONFIGURATION VARIABLES * * */
		    var disqus_shortname = 'codecampbell';
		    
		    /* * * DON'T EDIT BELOW THIS LINE * * */
		    (function() {
		        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		    })();
		</script>
		<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
	</article>

      </div>
    </div>
    <footer>
      <div class="content-wrap">
      	
	<div class="nav">
		<a href="/">Â« Full blog</a>
	</div>

      </div>
    </footer>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-51292661-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>